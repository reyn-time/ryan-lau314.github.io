---
layout: post
title: "Problem 012: Highly Divisible Triangular Number"
date: 2020-08-12 19:54:10 +0100
tags: euler
---
{% include mathjax.html %}
## Problem 
The sequence of triangle numbers is generated by adding the natural numbers. So the 7<sup>th</sup> triangle number would be $1 + 2 + 3 + 4 + 5 + 6 + 7 = 28$. The first ten terms would be:

\\\[1, 3, 6, 10, 15, 21, 28, 36, 45, 55, \cdots \\\]

Let us list the factors of the first seven triangle numbers:
<pre>
 <strong>1:</strong> 1
 <strong>3:</strong> 1,3
 <strong>6:</strong> 1,2,3,6
<strong>10:</strong> 1,2,5,10
<strong>15:</strong> 1,3,5,15
<strong>21:</strong> 1,3,7,21
<strong>28:</strong> 1,2,4,7,14,28
</pre>
We can see that 28 is the first triangle number to have over five divisors.

What is the value of the first triangle number to have over five hundred divisors?

## Solution
The hard part of this problem is to efficiently calculate the number of divisors in a number. This can be done by checking its prime factorization.

Consider the number 28. Its prime factorization is $28 = 2^2 \times 7^1$. What about its divisors?
\\\[
\begin{equation}
\begin{split} 
1 &= 2^0 \times 7^0 \\\\\\
2 &= 2^1 \times 7^0 \\\\\\ 
4 &= 2^2 \times 7^0 \\\\\\
7 &= 2^0 \times 7^1 \\\\\\
14 &= 2^1 \times 7^1 \\\\\\
28 &= 2^2 \times 7^1
\end{split} 
\end{equation}
\\\]

It can be easily shown that all divisors of 28 can be written in the form $2^a \times 7^b$, where $0 \leq a \leq 2$ and $0 \leq b \leq 1$. Hence, there are $(2 + 1) \times (1 + 1) = 6$ divisors in total (Why?). 

Similarly, if we have a number $n$ with the prime factorization $p_1^{x_1} \cdot p_2^{x_2} \cdot\cdots\cdot p_n^{x_n}$, there should be $(x_1+1)(x_2+1)\cdots(x_n+1)$ divisors.

I have made use of the prime factorization algorithm introduced in [Problem 003]({% post_url 2020-07-22-largest-prime-factor %}) to compute the number of divisors in a number:

{% highlight python %}
def num_of_divisors(n):
    return reduce(
        lambda x, y: x * y, [power + 1 for _, power in prime_factorisation(n)], 1
    )

def prime_factorisation(n):
    """
    Returns the prime factor form of a number.
    For example, input number 100 = 2^2 * 5^2 will be transformed to [(2, 2), (5, 2)].
    """
    factors = []
    curr_factor = 2
    exponent = 0
    while n > 1:
        while n % curr_factor == 0:
            n /= curr_factor
            exponent += 1

        if exponent > 0:
            factors.append((curr_factor, exponent))

        curr_factor += 1
        exponent = 0
    return factors
{% endhighlight %}

After that, it is relatively easy to find the minimum triangular number that has more than 500 divisors:
{% highlight python %}
i = 2
triangle = 1
while num_of_divisors(triangle) <= 500:
    triangle += i
    i += 1
print(triangle)
{% endhighlight %}

That triangular number is 76576500. It has 576 divisors!